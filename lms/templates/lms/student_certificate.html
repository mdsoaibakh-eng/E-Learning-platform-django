{% extends "lms/base.html" %}

{% block content %}
<div class="container mt-5 text-center">
    <div class="card shadow-lg p-5 border-0" style="background: linear-gradient(to bottom right, #ffffff, #f8f9fa);">
        <div class="card-body position-relative" style="border: 10px double #1a4a7c; padding: 40px;">
            <!-- Watermark/Icon -->
            <div class="position-absolute top-50 start-50 translate-middle" style="opacity: 0.05;">
                <i class="bi bi-award-fill display-1" style="font-size: 10rem;"></i>
            </div>

            <div class="mb-4">
                <i class="bi bi-mortarboard-fill text-primary" style="font-size: 4rem;"></i>
            </div>

            <h1 class="display-3 mb-2"
                style="font-family: 'Playfair Display', serif; color: #1a4a7c; font-weight: 700;">Certificate of
                Completion</h1>
            <p class="lead text-uppercase letter-spacing-2">This is to certify that</p>

            <h2 class="display-5 mb-4 fw-bold text-dark border-bottom d-inline-block px-5 pb-2">{{ (student.full_name or
                student.username) | upper }}
            </h2>

            <p class="lead">has successfully completed the course</p>
            <h3 class="mb-4 text-primary">{{ course.title | title }}</h3>

            <p class="mb-5">Completed on {{ date.strftime('%B %d, %Y') }}</p>

            <div class="mb-4">
                <small class="text-muted text-uppercase">Certificate ID</small><br>
                <span class="font-monospace fw-bold">{{ course.enrollments[0].certificate_id if
                    course.enrollments[0].certificate_id else 'PENDING' }}</span>
            </div>

            <div class="row justify-content-center mt-5">
                <div class="col-md-4">
                    <div class="border-top border-dark pt-2">
                        <img src="" alt="" style="height: 50px; display: none;"> <!-- Placeholder for signature -->
                        <p class="fw-bold mb-0">Instructor</p>
                        <small class="text-muted">
                            {% if course.instructor %}
                            {{ course.instructor.full_name|default:course.instructor.username|title }}
                            {% else %}
                            E-Learning Instructor
                            {% endif %}
                        </small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="border-top border-dark pt-2">
                        <p class="mb-0"
                            style="font-family: 'Great Vibes', cursive; font-size: 2rem; line-height: 0.8; margin-bottom: 10px;">
                            Zaix Snow</p>
                        <p class="fw-bold mb-0">ZAIX SNOW</p>
                        <small class="text-muted">CEO, E-Learning</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4 mb-5 no-print">
        <button onclick="window.print()" class="btn btn-primary btn-lg"><i class="bi bi-printer"></i> Print
            Certificate</button>
        <a href="{% url 'student_dashboard' %}" class="btn btn-outline-secondary btn-lg">Back to Dashboard</a>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Great+Vibes&display=swap');

    @media print {
        @page {
            size: landscape;
            margin: 0;
        }

        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0 !important;
            padding: 0 !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        .no-print,
        .navbar,
        .footer {
            display: none !important;
        }

        /* Container fills the page */
        .container {
            width: 100% !important;
            max-width: none !important;
            margin: 0 !important;
            padding: 0 !important;
            height: 100%;
        }

        /* Card using 297mm x 210mm A4 dimensions */
        .card {
            position: fixed;
            top: 0;
            left: 0;
            width: 297mm !important;
            /* Forces A4 Landscape width */
            height: 210mm !important;
            /* Forces A4 Landscape height */
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            border-radius: 0 !important;
            background: linear-gradient(to bottom right, #ffffff, #f8f9fa) !important;
            box-shadow: none !important;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            /* Transform hack for browsers that ignore landscape */
            transform-origin: top left;
        }

        .card-body {
            border: 10px double #1a4a7c !important;
            width: 95% !important;
            height: 90% !important;
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin: auto;
            padding: 40px !important;
        }
    }
</style>
{% endblock %}